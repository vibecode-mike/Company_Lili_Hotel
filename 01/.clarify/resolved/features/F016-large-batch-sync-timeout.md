# 釐清問題

PMS/CRM 超大批量同步（10K+ 記錄）時的超時設定與分批策略為何？

# 定位

Feature：pms_integration.feature - 大批量同步處理
ERM：PMS_Integration 實體

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 固定超時 - 設定全域超時時間（如 30 分鐘），超時則標記失敗 |
| B | 自動分批 - 超過 N 筆自動拆分為多批次，每批獨立處理 |
| C | 流式處理 - 使用 cursor/streaming 逐筆處理，無超時限制 |
| D | 佇列處理 - 大批量任務進入背景佇列，不阻塞同步請求 |
| Short | 提供其他簡短答案（<=5 字）|

# 影響範圍

- PMS/CRM 同步穩定性
- 系統資源佔用
- 同步完成時間預估

# 優先級

Medium
- Medium：影響大規模資料同步的可靠性

---
# 解決記錄

- **回答**：B + D 混合 - 超過 10K 自動拆批，背景佇列處理，每批有超時
- **更新的規格檔**：01/spec/features/pms_integration.feature
- **變更內容**：新增大批量同步規則：超過 10K 自動拆為批次（示例每批 2000），每批 5 分鐘超時；失敗批次可重試，背景佇列執行，成功批次不回滾
