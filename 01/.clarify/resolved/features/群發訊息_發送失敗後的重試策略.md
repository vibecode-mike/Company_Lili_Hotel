# 釐清問題

群發訊息發送失敗後（send_status = 發送失敗），系統是否提供自動重試機制？或僅允許手動重試？

# 定位

Feature：建立訊息推播 - 發送失敗處理與重試機制
ERM：Message 實體的 send_status 狀態轉換規則

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 自動重試（指數退避，最多 3 次） |
| B | 僅手動重試（改回草稿後重新發送） |
| C | 依失敗原因決定（配額不足不重試，API 錯誤自動重試） |
| D | 提供兩種選項（使用者可選擇自動或手動） |
| Short | 提供其他簡短答案（<=5 字） |

# 影響範圍

影響訊息發送的可靠性策略、排程任務的重試邏輯、失敗處理機制、以及使用者操作流程

# 優先級

High - 涉及訊息發送的核心可靠性機制

---

# 解決記錄

- **回答**：B - 僅手動重試（改回草稿後重新發送）
- **更新的規格檔**：spec/erm.dbml
- **變更內容**：更新 Message 實體的 send_status 屬性 Note 說明，新增「重試策略：僅支援手動重試，不提供自動重試機制。失敗處理流程：(1) 系統記錄失敗原因到 failure_reason 欄位、(2) 狀態改為『發送失敗』、(3) 管理員檢視失敗原因並決定處理方式、(4) 手動將狀態改回『草稿』、(5) 修正問題（如確認配額充足、修改訊息內容）後重新排程發送」
- **解決時間**：2025-11-14
