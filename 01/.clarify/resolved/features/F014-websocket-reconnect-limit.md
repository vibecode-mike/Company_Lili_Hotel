# 釐清問題

聊天室 WebSocket 重連的上限次數與間隔策略為何？

# 定位

Feature：message_history.feature - WebSocket 重連策略（第 79-102 行）
Feature：聊天室多渠道 - 即時更新機制

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 無限重連 - 按指數退避持續重試（1s, 2s, 4s, 8s...），直到成功 |
| B | 限制次數 - 最多重試 N 次（如 5 次），失敗後顯示離線提示 |
| C | 時間限制 - 在 M 分鐘內持續重試，超時後放棄 |
| D | 用戶控制 - 失敗後顯示「重新連接」按鈕，由用戶手動觸發 |
| Short | 提供其他簡短答案（<=5 字）|

# 影響範圍

- 客服操作連續性
- 系統資源消耗（無限重連可能耗盡資源）
- 用戶體驗（長時間離線提示）

# 優先級

Medium
- Medium：影響客服操作體驗與系統穩定性

---
# 解決記錄

- **回答**：A - 固定間隔：每 5 秒重連，最多 5 次
- **更新的規格檔**：01/spec/features/message_history.feature
- **變更內容**：將 WebSocket 斷線處理改為自動重連策略（固定 5 秒間隔，最多 5 次），失敗後提示手動重試並提供按鈕；斷線期間訊息暫存，最終失敗時提示未送出
