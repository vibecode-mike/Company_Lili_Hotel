# 釐清問題

互動標籤名稱除了「不得超過 20 個字」外，是否有其他格式限制（如禁止特殊字元、Emoji、空格等）？

# 定位

Feature：spec/features/interaction_tag_setup.feature Rule 關於標籤長度（約第60-65行）

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 僅限制長度 20 字，允許中英文、數字、空格、Emoji、特殊字元 |
| B | 限制長度 20 字，僅允許中英文、數字、底線、連字號 |
| C | 限制長度 20 字，禁止特殊字元與 Emoji，允許空格 |
| Short | 其他限制（<=5字）|

# 影響範圍

影響標籤輸入驗證、資料儲存編碼、標籤顯示樣式、CSV 匯出相容性，以及與外部系統整合時的資料交換格式。

# 優先級

Low

---
# 解決記錄

- **回答**：C - 限制長度 20 字，禁止特殊字元與 Emoji，允許空格
- **更新的規格檔**：spec/features/interaction_tag_setup.feature, spec/erm.dbml
- **變更內容**：
  1. 更新「單筆互動標籤不得超過 20 個字」規則，改為「互動標籤名稱格式限制」，明確說明僅允許中英文、數字、空格
  2. 新增成功範例：「VIP 會員」「2024 春節優惠」
  3. 新增失敗範例：包含特殊字元（逗號）、Emoji、標點符號的標籤
  4. 更新 erm.dbml 的 MemberTag.tag_name 和 InteractionTag.tag_name 欄位說明，補充格式限制與正則表達式驗證規則
- **設計理由**：
  - 提升可讀性：允許空格分隔詞語（如「VIP 會員」）
  - 避免 CSV 匯出問題：禁止逗號、引號等特殊字元
  - 避免編碼問題：禁止 Emoji，確保所有系統都能正確顯示
  - 外部系統相容性：純文字+數字+空格最穩定，與 PMS/CRM 整合無障礙
