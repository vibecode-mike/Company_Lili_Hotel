# 釐清問題

關鍵字觸發的比對邏輯為何？是完全匹配、部分匹配、還是包含匹配？是否區分大小寫？

# 定位

Feature：spec/features/auto_response.feature Rule 關於關鍵字匹配（約第34-40行）

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 完全匹配（會員訊息 = 關鍵字），不區分大小寫 |
| B | 包含匹配（會員訊息包含關鍵字即觸發），不區分大小寫 |
| C | 支援設定匹配模式（完全/包含/開頭/結尾），可選擇是否區分大小寫 |
| D | 支援正則表達式進階比對 |
| Short | 其他邏輯（<=5字）|

# 影響範圍

影響關鍵字觸發準確性、會員體驗、觸發次數統計、關鍵字設定指引，以及未來支援多語言或同義詞的擴充性。

# 優先級

High

---
# 解決記錄

- **回答**：B - 包含匹配，不區分大小寫
- **更新的規格檔**：spec/features/auto_response.feature
- **變更內容**：
  1. 新增 Rule「關鍵字比對邏輯：包含匹配，不區分大小寫」，包含 4 個 Example：
     - 包含匹配 - 會員訊息包含關鍵字即觸發
     - 不區分大小寫 - 大小寫不影響比對
     - 完全匹配也會觸發
     - 不包含關鍵字則不觸發
  2. 新增 Rule「多組關鍵字為 OR 邏輯，任一匹配即觸發」，包含 1 個 Example
- **比對邏輯規則**：
  - **包含匹配**：會員訊息包含關鍵字即觸發（例：關鍵字「訂房」→「我想訂房」✅）
  - **不區分大小寫**：大小寫不影響比對結果
  - **多關鍵字 OR 邏輯**：多組關鍵字任一匹配即觸發（例：關鍵字「訂房」「預約」「價格」→「請問價格」✅）
  - **完全匹配也適用**：會員訊息完全等於關鍵字也會觸發
- **設計理由**：
  - **符合現有規格**：原 Example 已展示包含匹配邏輯
  - **用戶體驗**：會員自然對話不會精確使用關鍵字，寬鬆匹配提升回應率
  - **實作簡單**：String.contains() 即可實現，降低開發成本
  - **飯店場景**：服務業需要寬鬆匹配，確保服務覆蓋率
- **使用建議**：
  - 建議使用 2-4 字關鍵字避免過度匹配
  - 避免使用過短關鍵字（如單字「房」）造成誤觸發
