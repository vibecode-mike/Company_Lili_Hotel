# 釐清問題

登出後清除會話需要清除哪些資料？僅清除伺服器 Session，還是也清除前端 LocalStorage/Cookie？

# 定位

Feature：spec/features/登出系統.feature Rule 標記為 #TODO（約第10-12行）

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 清除伺服器 Session + 清除前端所有 Cookie 與 LocalStorage |
| B | 僅清除伺服器 Session，前端由 API 回應 401 後自行清理 |
| C | 雙向清除：前端先清理本地資料，再呼叫登出 API 清除伺服器 Session |
| Short | 其他方式（<=5字）|

# 影響範圍

影響登出流程完整性、安全性設計、前端狀態管理、多標籤頁同步登出，以及會話劫持防護。

# 優先級

Medium

---
# 解決記錄

- **回答**：C - 雙向清除：前端先清理本地資料，再呼叫登出 API 清除伺服器 Session
- **更新的規格檔**：spec/features/登出系統.feature
- **變更內容**：
  1. 補充「登出後清除會話並導向登入頁面」規則的 Example，說明雙向清除流程：前端清除本地資料 → 呼叫登出 API → 後端清除 Session → 導向登入頁
  2. 補充「管理員必須處於已登入狀態」規則的 Example，說明已登入與未登入狀態的登出行為
  3. 新增容錯處理範例：API 呼叫失敗時前端仍完成登出流程
