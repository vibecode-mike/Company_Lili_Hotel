# 釐清問題

PMS 同步過程中若部分資料同步失敗（例如 100 筆中有 5 筆失敗），系統應如何處理？

# 定位

ERM：PMS_Integration 與 StayRecord、ConsumptionRecord 的同步機制

# 多選題

| 選項 | 描述 |
|--------|-------------|
| A | 全有全無（Transaction）：任一筆失敗則全部回滾，記錄錯誤並重試 |
| B | 部分提交：成功的筆數提交，失敗的筆數記錄錯誤日誌供人工處理 |
| C | 繼續執行：記錄失敗筆數但不中斷，下次同步時重新嘗試所有資料 |
| D | 跳過失敗：記錄錯誤並跳過該筆，繼續處理剩餘資料，失敗筆數不重試 |
| Short | 提供其他簡短答案（<=5 字） |

# 影響範圍

影響 PMS 同步的事務管理策略、錯誤處理機制、資料一致性保證、以及同步效能與可靠性

# 優先級

High - 涉及資料同步的可靠性與一致性核心策略

---

# 解決記錄

- **回答**：D - 跳過失敗：記錄錯誤並跳過該筆，繼續處理剩餘資料，失敗筆數不重試
- **更新的規格檔**：spec/erm.dbml
- **變更內容**：更新 PMS_Integration 實體的 Note 說明，新增「部分同步失敗處理策略：採用『跳過失敗』策略」，包含：(1) 記錄錯誤詳情到系統日誌、(2) 跳過失敗資料繼續處理、(3) 不自動重試需人工處理、(4) 提供摘要報告、(5) 錯誤日誌保留 90 天
- **解決時間**：2025-11-14
